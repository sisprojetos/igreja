<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:p="http://primefaces.org/ui">
<h:body>
	<ui:composition template="/Template/layout.xhtml">
		<ui:define name="content">

			<br></br>

			<p:messages closable="true" autoUpdate="true" globalOnly="true" />
		
			<p:dataTable id="dataTableTipoMembro" value="#{tipoMembroBean.tipomembros}" var="m" border="1" rows="10" paginator="true" rowsPerPageTemplate="5,10,15" sortMode="multiple" lazy="true">
				<f:facet name="header">Tipos de Membro</f:facet>
				<p:column headerText="#{language.nome}" sortBy="#{m.nome}">
					<h:outputText value="#{m.nome}" />
				</p:column>
				<p:column headerText="#{language.descricao}" sortBy="#{m.descricao}">
					<h:outputText value="#{m.descricao}" />
				</p:column>
				<p:column>
					<h:form>
						<p:commandLink value="Alterar" actionListener="#{tipoMembroBean.alterarTipoMembro}" update=":formTipoMembro:panelMembro" oncomplete="PF('dialogTipoMembro').show(); "/>
					</h:form>
				</p:column>
				<p:column>
					<h:form>
						<p:commandLink value="Excluir" actionListener="#{tipoMembroBean.excluirTipoMembro}" update=":dataTableTipoMembro"> <p:confirm header="Confirmação" message="Confirma Exclusão?" icon="ui-icon-alert" />	</p:commandLink>
					</h:form>
				</p:column>
				<f:facet name="footer">
			        Há um total de #{tipoMembroBean.tipoMembroLength} registros.
			    </f:facet>
			</p:dataTable>
			
			<h:form>
				<p:commandButton value="#{language.incluirTipoMembro}" actionListener="#{tipoMembroBean.incluirTipoMembro}" update=":formTipoMembro:panelMembro" oncomplete="PF('dialogTipoMembro').show();" />
			</h:form>
			
			<p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
				<p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
				<p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
			</p:confirmDialog>
			
			<p:dialog header="Inclusão/Alteração de Tipo Membro" widgetVar="dialogTipoMembro" modal="true" resizable="false">
				<h:form id="formTipoMembro">
					<p:panelGrid id="panelMembro" columns="3">
						<p:outputLabel value="Nome: " />
						<p:inputText id="tipoMembroNome" maxlength="20" value="#{tipoMembroBean.tipoMembro.nome}" required="true" requiredMessage="É necessário informar o Tipo do cliente" />
						<p:message for="tipoMembroNome" />
						<p:outputLabel value="Descrição: " />
						<p:inputText id="tipoMembroDescricao" maxlength="100" value="#{tipoMembroBean.tipoMembro.descricao}" />
						<h:outputLabel value="" />
						<p:commandButton value="Incluir" actionListener="#{tipoMembroBean.incluirMembro}" rendered="#{tipoMembroBean.tipoMembro.nome == null}"	update=":dataTableTipoMembro,panelMembro" oncomplete="if (!args.validationFailed) {PF('dialogTipoMembro').hide();}" />
						<p:commandButton value="Alterar" actionListener="#{tipoMembroBean.alterarTipoMembroProcessa}" rendered="#{tipoMembroBean.tipoMembro.nome != null}" update=":dataTableTipoMembro,panelMembro" oncomplete="if (!args.validationFailed) {PF('dialogTipoMembro').hide();}" />
						<p:commandButton value="Cancelar" oncomplete="PF('dialogTipoMembro').hide();" />
					</p:panelGrid>
				</h:form>
			</p:dialog>
	
		</ui:define>
	</ui:composition>
</h:body>
</html>
